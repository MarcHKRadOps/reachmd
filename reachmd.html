<html>
    <head>
        <script async src='https://www.googletagservices.com/tag/js/gpt.js'></script>
        <script>
            window.googletag = window.googletag || {cmd: []};
            var adSlot1, adSlot2, adSlot3, adSlot4, adSlot5, adSlot6, adSlot7, adSlot8, adSlot9, adSlot10, adSlot11;

            googletag.cmd.push(function() {
                var mapLeader = googletag.sizeMapping().
                    addSize([0, 0], [[320,50],[320,100],[300,50],[1,1],'fluid']).
                    addSize([1025, 0], [[728, 90],[1,1]]).
                    build();
                var mapBody = googletag.sizeMapping().
                    addSize([0, 0], [[300,250],[320,50],[320,100],[300,50],[1,1],'fluid']).
                    addSize([1025, 0], [[728, 90],[1,1]]).
                    build();
                var mapRect = googletag.sizeMapping().
                    addSize([0,0], []).
                    //addSize([1023,769], [[300,250],[1,1],'fluid']).
                    addSize([1025,0], [[300,250],[1,1],'fluid']).
                    build();

                adSlot1 = googletag.defineSlot('/21928603557/rmd/top', [728,90],'ad-top').defineSizeMapping(mapLeader).addService(googletag.pubads());
                adSlot2 = googletag.defineSlot('/21928603557/rmd/footer', [728,90],'ad-footer').defineSizeMapping(mapLeader).addService(googletag.pubads());
                adSlot3 = googletag.defineSlot('/21928603557/rmd/body1', [728,90],'ad-body1').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot4 = googletag.defineSlot('/21928603557/rmd/body2', [728,90],'ad-body2').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot5 = googletag.defineSlot('/21928603557/rmd/body3', [728,90],'ad-body3').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot6 = googletag.defineSlot('/21928603557/rmd/body4', [728,90],'ad-body4').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot7 = googletag.defineSlot('/21928603557/rmd/body5', [728,90],'ad-body5').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot8 = googletag.defineSlot('/21928603557/rmd/body6', [728,90],'ad-body6').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot9 = googletag.defineSlot('/21928603557/rmd/body7', [728,90],'ad-body7').defineSizeMapping(mapBody).addService(googletag.pubads());
                adSlot10 = googletag.defineSlot('/21928603557/rmd/sidebar', [300,250],'ad-sidebar').defineSizeMapping(mapRect).addService(googletag.pubads());
                adSlot11 = googletag.defineSlot('/21928603557/rmd/module', [300,250],'ad-module').defineSizeMapping(mapRect).addService(googletag.pubads());
                googletag.pubads().setTargeting("site", "reachmd");
                var pathParts = window.location.pathname.substr(0).split("/");
                googletag.pubads().setTargeting("agg1", pathParts[1] ? pathParts[1] : "home");
                googletag.pubads().setTargeting("agg2", pathParts[2] ? pathParts[2].slice(0,40) : "none");
                googletag.pubads().setTargeting("details-program", document.querySelector("meta[property='og:title']") ? document.querySelector("meta[property='og:title']").getAttribute("content").slice(0,39) : "none");
                googletag.pubads().setTargeting("tag", pathParts[3] ? pathParts[pathParts.length - 2] : "none");
                googletag.pubads().setTargeting("i", window.reachMD.user.rmdvid);
                googletag.pubads().setTargeting("s", window.reachMD.user.speciality);
                googletag.pubads().setTargeting("p", window.reachMD.user.profession);
                googletag.pubads().setTargeting("li", window.reachMD.user.isLoggedIn ? "true" : "false");
                googletag.pubads().disableInitialLoad();
                //googletag.pubads().enableSingleRequest();
                //googletag.pubads().collapseEmptyDivs(true);
                googletag.enableServices();
            });

            var refreshSlots = function() {
                googletag.cmd.push(function() {
                    googletag.pubads().refresh([adSlot1, adSlot2, adSlot3, adSlot4, adSlot5, adSlot6, adSlot7, adSlot8, adSlot9, adSlot10, adSlot11]);
                    let eventListnerCreated = false;
                    if (!eventListnerCreated) {
                        eventListnerCreated = true;
                        googletag.pubads().addEventListener('slotRenderEnded', afterAdsRenderEnded);
                    }
                });
            };
        </script>
    </head>

    <body>

        <h2 style='padding: 20px 0px;'>test</h2>
        <h5>ad testing for reachmd</h5>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-top'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-top');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body1'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body1');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body2'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body2');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body3'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body3');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body4'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body4');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body5'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body5');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body6'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body6');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-body7'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-body7');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-sidebar'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-sidebar');
                });
            </script>
        </div>
        <div>
            <span>Advertisement</span>
        </div>
        <div id='ad-module'>
            <script type='text/javascript'>
                googletag.cmd.push(function() {
                    googletag.display('ad-module');
                });
            </script>
        </div>
        <div class="sticky-ad-container" style="position:-webkit-sticky; position:sticky; bottom: 0; background-color: lightblue; margin-top: 20px;z-index:22 !important;">
        <div>
            <span>Advertisement</span>
        </div>
            <div id='ad-footer' style="margin: 0 auto;background-color: lightgrey">
                <script type='text/javascript'>
                    googletag.cmd.push(function() {
                        googletag.display('ad-footer');
                    });
                </script>
            </div>
        </div>
        <script type="text/javascript">window.refreshSlots();</script>
    </body>
</html>